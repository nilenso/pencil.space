{"version":3,"sources":["src/tube.cljs"],"mappings":";;;AAGA,AAAKA,AACH,AAAA,AAAKC,AAEA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACC;AAER,AAAKC,AAAQ,AAAA,AAAUH,AAAoC,AAAA,AAACE;AAC5D,AAAKE,AAAe,AAAOD;AAE3B,AAAA,AAAME;AAAN,AACE,AAAUL;;AAEZ,AAAA,AAAA,AAAAM,AAAME;AAAN,AAAA,AAAAD,AAAA,AAAA;AAAA,AAAA,AAAAA;AAAA;AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA;;;;;AAAA,AAAA,AAAA,AAAMD,AACFE,AAASC;AADb,AAEG,AAACC,AAAKF,AACAC,AACA,AAAKE;AAAL,AACE,AAAMC,AAAS,AAACC,AAAQF;AAAxB,AACE,AAAA,AAACG,AAA2B,AAACC,AAAOH;;;;AANjD,AAAA,AAAA,AAAMN,AAQFE,AAASC,AAASO;AARtB,AASG,AAACN,AAAKF,AACAC,AACAO,AACA,AAAKL;AAAL,AACE,AAAMC,AAAS,AAACC,AAAQF;AAAxB,AACE,AAAA,AAACG,AAAgC,AAACC,AAAOH;;;;AAdtD,AAAA,AAAA,AAAMN,AAgBFE,AAASC,AAASO,AAAMC;AAhB5B,AAiBG,AAACP,AAAKF,AACAC,AACAO,AACAC,AACA,AAAKN;AAAL,AACE,AAAMC,AAAS,AAACC,AAAQF;AAAxB,AACE,AAAA,AAACG,AAAkC,AAACC,AAAOH;;;;AAvBxD,AAAA,AAAA,AAAMN,AAyBFE,AAASC,AAASO,AAAMC,AAASC;AAzBrC,AA0BG,AAAMC,AAAU,AAAOlB,AAAQO,AAAS,AAACR,AAAQS;AAAjD,AACMU,AACA,AAAA,AAAA,AAAAC,AACA,AACA;AAFA,AAAgB,AAAAC,AAAO,AAAAD,AAACP;AAAR,AAAA,AAAAQ,AAAAA,AAACL,AAAAA,AAAAA;AACjB,AAAA,AAAAM;AAAA,AAAmB,AAAAC,AAAU,AAAAD,AAACT;AAAX,AAAA,AAAAU,AAAAA,AAACN,AAAAA,AAAAA;AACpB,AAAA,AAAAO;AAAA,AAAqB,AAAAC,AAAY,AAAAD,AAACX;AAAb,AAAA,AAAAY,AAAAA,AAACP,AAAAA,AAAAA;;;;AA9B/B,AAAA,AAAA,AAAMZ;;AAAN,AAgCA,AAAA,AAAMoB,AACHC,AAAWC;AADd,AAGE,AAAK3B,AAAQ0B,AAAWC;;AAExB,AAAA,AAAU1B,AAEA,AAAKS;AAAL,AACE,AAAA,AAACG,AAAqC,AAACd,AAAQW;;;AAE3D,AAAA,AAAUT,AAEA,AAAKS;AAAL,AACE,AAAA,AAACG,AAAiCH","names":["src.tube/socket","js/module$node_modules$phoenix$priv$static$phoenix.Socket","cljs.core/clj->js","src.tube/channel","src.tube/joined-channel","src.tube/connect","var_args","G__34481","src.tube/push","js/Error","msg-type","msg-body","src.tube.push","resp","resp-clj","cljs.core.js__GT_clj","js/console.log","cljs.core.pr_str","on-ok","on-error","on-timeout","pushEvent","p1__34477#","G__34482","p1__34478#","G__34483","p1__34479#","G__34484","src.tube/join","event-type","callback"],"sourcesContent":["(ns src.tube\n  (:require [\"phoenix\" :refer (Socket)]))\n\n(def socket\n  (new Socket\n       \"ws://localhost:4000/socket\"\n       (clj->js {:params {:token \"\"}})))\n\n(def channel (.channel socket \"game:eeOeXocf3MZw99aJ3Mpgy\" (clj->js {})))\n(def joined-channel (.join channel))\n\n(defn connect []\n  (.connect socket))\n\n(defn push\n  ([msg-type msg-body]\n   (push msg-type\n         msg-body\n         (fn [resp]\n           (let [resp-clj (js->clj resp)]\n             (js/console.log \"Received\", (pr-str resp-clj))))))\n\n  ([msg-type msg-body on-ok]\n   (push msg-type\n         msg-body\n         on-ok\n         (fn [resp]\n           (let [resp-clj (js->clj resp)]\n             (js/console.log \"Received error\" (pr-str resp-clj))))))\n\n  ([msg-type msg-body on-ok on-error]\n   (push msg-type\n         msg-body\n         on-ok\n         on-error\n         (fn [resp]\n           (let [resp-clj (js->clj resp)]\n             (js/console.log \"Received Timeout\" (pr-str resp-clj))))))\n\n  ([msg-type msg-body on-ok on-error on-timeout]\n   (let [pushEvent (.push channel msg-type (clj->js msg-body))]\n     (-> pushEvent\n         (.receive \"ok\" #(on-ok (js->clj %)))\n         (.receive \"error\" #(on-error (js->clj %)))\n         (.receive \"timeout\" #(on-timeout (js->clj %)))))))\n\n(defn join\n  [event-type callback]\n\n  (.on channel event-type callback)\n\n  (.receive joined-channel\n            \"ok\"\n            (fn [resp]\n              (js/console.log \"Joined successfully\" (clj->js resp))))\n\n  (.receive joined-channel\n            \"error\"\n            (fn [resp]\n              (js/console.log \"Unable to join\", resp))))\n"]}