shadow$provide.module$node_modules$roughjs$bin$path=function(global,require,module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}
function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:!0});exports.PathFitter=exports.RoughArcConverter=exports.RoughPath=void 0;var _geometry=require("module$node_modules$roughjs$bin$geometry"),PARAMS={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0},ParsedPath=function(){function ParsedPath(d){_classCallCheck(this,
ParsedPath);this.COMMAND=0;this.NUMBER=1;this.EOD=2;this.segments=[];this.parseData(d);this.processPoints()}_createClass(ParsedPath,[{key:"tokenize",value:function(d){for(var tokens=[];""!==d;)if(d.match(/^([ \t\r\n,]+)/))d=d.substr(RegExp.$1.length);else if(d.match(/^([aAcChHlLmMqQsStTvVzZ])/))tokens[tokens.length]={type:this.COMMAND,text:RegExp.$1},d=d.substr(RegExp.$1.length);else if(d.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))tokens[tokens.length]={type:this.NUMBER,
text:"".concat(parseFloat(RegExp.$1))},d=d.substr(RegExp.$1.length);else return[];tokens[tokens.length]={type:this.EOD,text:""};return tokens}},{key:"parseData",value:function(d){var tokens=this.tokenize(d),index=0,token=tokens[index],mode="BOD";for(this.segments=[];token.type!==this.EOD;){var params=[];if("BOD"===mode)if("M"===token.text||"m"===token.text){index++;var param_length=PARAMS[token.text];mode=token.text}else{this.parseData("M0,0"+d);break}else token.type===this.NUMBER?param_length=PARAMS[mode]:
(index++,param_length=PARAMS[token.text],mode=token.text);if(index+param_length<tokens.length){for(token=index;token<index+param_length;token++){var numbeToken=tokens[token];if(numbeToken.type===this.NUMBER)params[params.length]=+numbeToken.text;else{console.error("Param not a number: "+mode+","+numbeToken.text);return}}if("number"===typeof PARAMS[mode])this.segments.push({key:mode,data:params}),index+=param_length,token=tokens[index],"M"===mode&&(mode="L"),"m"===mode&&(mode="l");else{console.error("Bad segment: "+
mode);break}}else console.error("Path data ended short")}}},{key:"processPoints",value:function(){for(var first=null,currentPoint=[0,0],i=0;i<this.segments.length;i++){var s=this.segments[i];switch(s.key){case "M":case "L":case "T":s.point=[s.data[0],s.data[1]];break;case "m":case "l":case "t":s.point=[s.data[0]+currentPoint[0],s.data[1]+currentPoint[1]];break;case "H":s.point=[s.data[0],currentPoint[1]];break;case "h":s.point=[s.data[0]+currentPoint[0],currentPoint[1]];break;case "V":s.point=[currentPoint[0],
s.data[0]];break;case "v":s.point=[currentPoint[0],s.data[0]+currentPoint[1]];break;case "z":case "Z":first&&(s.point=[first[0],first[1]]);break;case "C":s.point=[s.data[4],s.data[5]];break;case "c":s.point=[s.data[4]+currentPoint[0],s.data[5]+currentPoint[1]];break;case "S":s.point=[s.data[2],s.data[3]];break;case "s":s.point=[s.data[2]+currentPoint[0],s.data[3]+currentPoint[1]];break;case "Q":s.point=[s.data[2],s.data[3]];break;case "q":s.point=[s.data[2]+currentPoint[0],s.data[3]+currentPoint[1]];
break;case "A":s.point=[s.data[5],s.data[6]];break;case "a":s.point=[s.data[5]+currentPoint[0],s.data[6]+currentPoint[1]]}if("m"===s.key||"M"===s.key)first=null;s.point&&(currentPoint=s.point,first||(first=s.point));if("z"===s.key||"Z"===s.key)first=null}}},{key:"closed",get:function(){if("undefined"===typeof this._closed){this._closed=!1;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.segments[Symbol.iterator](),_step;!(_iteratorNormalCompletion=
(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)"z"===_step.value.key.toLowerCase()&&(this._closed=!0)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator["return"])_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError;}}}return this._closed}}]);return ParsedPath}();global=function(){function RoughPath(d){_classCallCheck(this,RoughPath);this._position=[0,0];this.quadReflectionPoint=this.bezierReflectionPoint=this._first=
null;this.parsed=new ParsedPath(d)}_createClass(RoughPath,[{key:"setPosition",value:function(x,y){this._position=[x,y];this._first||(this._first=[x,y])}},{key:"segments",get:function(){return this.parsed.segments}},{key:"closed",get:function(){return this.parsed.closed}},{key:"linearPoints",get:function(){if(!this._linearPoints){var lp=[],points=[],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=this.parsed.segments[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=
(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var s=_step2.value,key=s.key.toLowerCase();if("m"===key||"z"===key)if(points.length&&(lp.push(points),points=[]),"z"===key)continue;s.point&&points.push(s.point)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&null!=_iterator2["return"])_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2;}}points.length&&lp.push(points);this._linearPoints=lp}return this._linearPoints}},
{key:"first",get:function(){return this._first},set:function(v){this._first=v}},{key:"position",get:function(){return this._position}},{key:"x",get:function(){return this._position[0]}},{key:"y",get:function(){return this._position[1]}}]);return RoughPath}();exports.RoughPath=global;global=function(){function RoughArcConverter(from,to,radii,angle,largeArcFlag,sweepFlag){_classCallCheck(this,RoughArcConverter);this._cosPhi=this._sinPhi=this._ry=this._rx=this._numSegs=this._segIndex=0;this._C=[0,0];
this._T=this._delta=this._theta=0;this._from=from;if(from[0]!==to[0]||from[1]!==to[1]){var radPerDeg=Math.PI/180;this._rx=Math.abs(radii[0]);this._ry=Math.abs(radii[1]);this._sinPhi=Math.sin(angle*radPerDeg);this._cosPhi=Math.cos(angle*radPerDeg);radii=this._cosPhi*(from[0]-to[0])/2+this._sinPhi*(from[1]-to[1])/2;angle=-this._sinPhi*(from[0]-to[0])/2+this._cosPhi*(from[1]-to[1])/2;radPerDeg=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*angle*angle-this._ry*this._ry*radii*radii;0>radPerDeg?
(largeArcFlag=Math.sqrt(1-radPerDeg/(this._rx*this._rx*this._ry*this._ry)),this._rx*=largeArcFlag,this._ry*=largeArcFlag,radPerDeg=0):radPerDeg=(largeArcFlag===sweepFlag?-1:1)*Math.sqrt(radPerDeg/(this._rx*this._rx*angle*angle+this._ry*this._ry*radii*radii));largeArcFlag=radPerDeg*this._rx*angle/this._ry;radPerDeg=-radPerDeg*this._ry*radii/this._rx;this._C=[0,0];this._C[0]=this._cosPhi*largeArcFlag-this._sinPhi*radPerDeg+(from[0]+to[0])/2;this._C[1]=this._sinPhi*largeArcFlag+this._cosPhi*radPerDeg+
(from[1]+to[1])/2;this._theta=this.calculateVectorAngle(1,0,(radii-largeArcFlag)/this._rx,(angle-radPerDeg)/this._ry);from=this.calculateVectorAngle((radii-largeArcFlag)/this._rx,(angle-radPerDeg)/this._ry,(-radii-largeArcFlag)/this._rx,(-angle-radPerDeg)/this._ry);!sweepFlag&&0<from?from-=2*Math.PI:sweepFlag&&0>from&&(from+=2*Math.PI);this._numSegs=Math.ceil(Math.abs(from/(Math.PI/2)));this._delta=from/this._numSegs;this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/
2)}}_createClass(RoughArcConverter,[{key:"getNextSegment",value:function(){if(this._segIndex===this._numSegs)return null;var cosTheta1=Math.cos(this._theta),sinTheta1=Math.sin(this._theta),theta2=this._theta+this._delta,cosTheta2=Math.cos(theta2),sinTheta2=Math.sin(theta2),to=[this._cosPhi*this._rx*cosTheta2-this._sinPhi*this._ry*sinTheta2+this._C[0],this._sinPhi*this._rx*cosTheta2+this._cosPhi*this._ry*sinTheta2+this._C[1]];cosTheta1=[this._from[0]+this._T*(-this._cosPhi*this._rx*sinTheta1-this._sinPhi*
this._ry*cosTheta1),this._from[1]+this._T*(-this._sinPhi*this._rx*sinTheta1+this._cosPhi*this._ry*cosTheta1)];cosTheta2=[to[0]+this._T*(this._cosPhi*this._rx*sinTheta2+this._sinPhi*this._ry*cosTheta2),to[1]+this._T*(this._sinPhi*this._rx*sinTheta2-this._cosPhi*this._ry*cosTheta2)];this._theta=theta2;this._from=[to[0],to[1]];this._segIndex++;return{cp1:cosTheta1,cp2:cosTheta2,to:to}}},{key:"calculateVectorAngle",value:function(ux,uy,vx,vy){ux=Math.atan2(uy,ux);vx=Math.atan2(vy,vx);return vx>=ux?vx-
ux:2*Math.PI-(ux-vx)}}]);return RoughArcConverter}();exports.RoughArcConverter=global;global=function(){function PathFitter(sets,closed){_classCallCheck(this,PathFitter);this.sets=sets;this.closed=closed}_createClass(PathFitter,[{key:"fit",value:function(simplification){var outSets=[],_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=this.sets[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=
!0){var set=_step3.value,length=set.length,estLength=Math.floor(simplification*length);if(5>estLength){if(5>=length)continue;estLength=5}outSets.push(this.reduce(set,estLength))}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&null!=_iterator3["return"])_iterator3["return"]()}finally{if(_didIteratorError3)throw _iteratorError3;}}simplification="";for(_iteratorNormalCompletion3=0;_iteratorNormalCompletion3<outSets.length;_iteratorNormalCompletion3++){_didIteratorError3=
outSets[_iteratorNormalCompletion3];for(_iteratorError3=0;_iteratorError3<_didIteratorError3.length;_iteratorError3++)_iterator3=_didIteratorError3[_iteratorError3],simplification=0===_iteratorError3?simplification+("M"+_iterator3[0]+","+_iterator3[1]):simplification+("L"+_iterator3[0]+","+_iterator3[1]);this.closed&&(simplification+="z ")}return simplification}},{key:"reduce",value:function(set,count){if(set.length<=count)return set;for(set=set.slice(0);set.length>count;){for(var areas=[],minArea=
-1,minIndex=-1,i=1;i<set.length-1;i++){var a=(0,_geometry.lineLength)([set[i-1],set[i]]),b=(0,_geometry.lineLength)([set[i],set[i+1]]),c=(0,_geometry.lineLength)([set[i-1],set[i+1]]),s=(a+b+c)/2;a=Math.sqrt(s*(s-a)*(s-b)*(s-c));areas.push(a);if(0>minArea||a<minArea)minArea=a,minIndex=i}if(0<minIndex)set.splice(minIndex,1);else break}return set}}]);return PathFitter}();exports.PathFitter=global}
//# sourceMappingURL=module$node_modules$roughjs$bin$path.js.map
