{
"version":3,
"file":"goog.i18n.numberformat.js",
"lineCount":976,
"mappings":"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",
"sources":["goog/i18n/numberformat.js"],
"sourcesContent":["// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Number format/parse library with locale support.\n */\n\n\n/**\n * Namespace for locale number format functions\n */\ngoog.provide('goog.i18n.NumberFormat');\ngoog.provide('goog.i18n.NumberFormat.CurrencyStyle');\ngoog.provide('goog.i18n.NumberFormat.Format');\n\ngoog.require('goog.asserts');\ngoog.require('goog.i18n.CompactNumberFormatSymbols');\ngoog.require('goog.i18n.NumberFormatSymbols');\ngoog.require('goog.i18n.NumberFormatSymbols_u_nu_latn');\ngoog.require('goog.i18n.currency');\ngoog.require('goog.math');\ngoog.require('goog.string');\n\n\n\n/**\n * Constructor of NumberFormat.\n * @param {number|string} pattern The number that indicates a predefined\n *     number format pattern.\n * @param {string=} opt_currency Optional international currency\n *     code. This determines the currency code/symbol used in format/parse. If\n *     not given, the currency code for the current locale will be used.\n * @param {number=} opt_currencyStyle currency style, value defined in\n *     goog.i18n.NumberFormat.CurrencyStyle. If not given, the currency style\n *     for the current locale will be used.\n * @param {!Object<string, string>=} opt_symbols Optional number format symbols\n *     map, analogous to goog.i18n.NumberFormatSymbols. If present, this\n *     overrides the symbols from the current locale, such as the percent sign\n *     and minus sign.\n * @constructor\n */\ngoog.i18n.NumberFormat = function(\n    pattern, opt_currency, opt_currencyStyle, opt_symbols) {\n  if (opt_currency && !goog.i18n.currency.isValid(opt_currency)) {\n    throw new TypeError('Currency must be valid ISO code');\n  }\n\n  /** @const @private {?string} */\n  this.intlCurrencyCode_ = opt_currency ? opt_currency.toUpperCase() : null;\n\n  /** @const @private {number} */\n  this.currencyStyle_ =\n      opt_currencyStyle || goog.i18n.NumberFormat.CurrencyStyle.LOCAL;\n\n  /** @const @private {?Object<string, string>} */\n  this.overrideNumberFormatSymbols_ = opt_symbols || null;\n\n  /** @private {number} */\n  this.maximumIntegerDigits_ = 40;\n  /** @private {number} */\n  this.minimumIntegerDigits_ = 1;\n  /** @private {number} */\n  this.significantDigits_ = 0;  // invariant, <= maximumFractionDigits\n  /** @private {number} */\n  this.maximumFractionDigits_ = 3;  // invariant, >= minFractionDigits\n  /** @private {number} */\n  this.minimumFractionDigits_ = 0;\n  /** @private {number} */\n  this.minExponentDigits_ = 0;\n  /** @private {boolean} */\n  this.useSignForPositiveExponent_ = false;\n\n  /**\n   * Whether to show trailing zeros in the fraction when significantDigits_ is\n   * positive.\n   * @private {boolean}\n   */\n  this.showTrailingZeros_ = false;\n\n  /** @private {string} */\n  this.positivePrefix_ = '';\n  /** @private {string} */\n  this.positiveSuffix_ = '';\n  /** @private {string} */\n  this.negativePrefix_ = this.getNumberFormatSymbols_().MINUS_SIGN;\n  /** @private {string} */\n  this.negativeSuffix_ = '';\n\n  // The multiplier for use in percent, per mille, etc.\n  /** @private {number} */\n  this.multiplier_ = 1;\n\n  /**\n   * True if the percent/permill sign of the negative pattern is expected.\n   * @private {boolean}\n   */\n  this.negativePercentSignExpected_ = false;\n\n  /**\n   * The grouping array is used to store the values of each number group\n   * following left of the decimal place. For example, a number group with\n   * goog.i18n.NumberFormat('#,##,###') should have [3,2] where 2 is the\n   * repeated number group following a fixed number grouping of size 3.\n   * @private {!Array<number>}\n   */\n  this.groupingArray_ = [];\n\n  /** @private {boolean} */\n  this.decimalSeparatorAlwaysShown_ = false;\n  /** @private {boolean} */\n  this.useExponentialNotation_ = false;\n  /** @private {goog.i18n.NumberFormat.CompactStyle} */\n  this.compactStyle_ = goog.i18n.NumberFormat.CompactStyle.NONE;\n\n  /**\n   * The number to base the formatting on when using compact styles, or null\n   * if formatting should not be based on another number.\n   * @type {?number}\n   * @private\n   */\n  this.baseFormattingNumber_ = null;\n\n  /** @private {string} */\n  this.pattern_;\n\n  if (typeof pattern == 'number') {\n    this.applyStandardPattern_(pattern);\n  } else {\n    this.applyPattern_(pattern);\n  }\n};\n\n\n/**\n * Standard number formatting patterns.\n * @enum {number}\n */\ngoog.i18n.NumberFormat.Format = {\n  DECIMAL: 1,\n  SCIENTIFIC: 2,\n  PERCENT: 3,\n  CURRENCY: 4,\n  COMPACT_SHORT: 5,\n  COMPACT_LONG: 6\n};\n\n\n/**\n * Currency styles.\n * @enum {number}\n */\ngoog.i18n.NumberFormat.CurrencyStyle = {\n  LOCAL: 0,     // currency style as it is used in its circulating country.\n  PORTABLE: 1,  // currency style that differentiate it from other popular ones.\n  GLOBAL: 2     // currency style that is unique among all currencies.\n};\n\n\n/**\n * Compacting styles.\n * @enum {number}\n */\ngoog.i18n.NumberFormat.CompactStyle = {\n  NONE: 0,   // Don't compact.\n  SHORT: 1,  // Short compact form, such as 1.2B.\n  LONG: 2    // Long compact form, such as 1.2 billion.\n};\n\n\n/**\n * If the usage of Ascii digits should be enforced.\n * @type {boolean}\n * @private\n */\ngoog.i18n.NumberFormat.enforceAsciiDigits_ = false;\n\n\n/**\n * Set if the usage of Ascii digits in formatting should be enforced.\n * NOTE: This function must be called before constructing NumberFormat.\n *\n * @param {boolean} doEnforce Boolean value about if Ascii digits should be\n *     enforced.\n */\ngoog.i18n.NumberFormat.setEnforceAsciiDigits = function(doEnforce) {\n  goog.i18n.NumberFormat.enforceAsciiDigits_ = doEnforce;\n};\n\n\n/**\n * Return if Ascii digits is enforced.\n * @return {boolean} If Ascii digits is enforced.\n */\ngoog.i18n.NumberFormat.isEnforceAsciiDigits = function() {\n  return goog.i18n.NumberFormat.enforceAsciiDigits_;\n};\n\n\n/**\n * Returns the current NumberFormatSymbols.\n * @return {?}\n * @private\n */\ngoog.i18n.NumberFormat.prototype.getNumberFormatSymbols_ = function() {\n  return this.overrideNumberFormatSymbols_ ||\n      (goog.i18n.NumberFormat.enforceAsciiDigits_ ?\n           goog.i18n.NumberFormatSymbols_u_nu_latn :\n           goog.i18n.NumberFormatSymbols);\n};\n\n\n/**\n * Returns the currency code.\n * @return {string}\n * @private\n */\ngoog.i18n.NumberFormat.prototype.getCurrencyCode_ = function() {\n  return this.intlCurrencyCode_ ||\n      this.getNumberFormatSymbols_().DEF_CURRENCY_CODE;\n};\n\n\n/**\n * Sets minimum number of fraction digits.\n * @param {number} min the minimum.\n * @return {!goog.i18n.NumberFormat} Reference to this NumberFormat object.\n */\ngoog.i18n.NumberFormat.prototype.setMinimumFractionDigits = function(min) {\n  if (this.significantDigits_ > 0 && min > 0) {\n    throw new Error(\n        'Can\\'t combine significant digits and minimum fraction digits');\n  }\n  this.minimumFractionDigits_ = min;\n  return this;\n};\n\n\n/**\n * Gets minimum number of fraction digits.\n * @return {number} The number of minimum fraction digits.\n */\ngoog.i18n.NumberFormat.prototype.getMinimumFractionDigits = function() {\n  return this.minimumFractionDigits_;\n};\n\n\n/**\n * Sets maximum number of fraction digits.\n * @param {number} max the maximum.\n * @return {!goog.i18n.NumberFormat} Reference to this NumberFormat object.\n */\ngoog.i18n.NumberFormat.prototype.setMaximumFractionDigits = function(max) {\n  if (max > 308) {\n    // Math.pow(10, 309) becomes Infinity which breaks the logic in this class.\n    throw new Error('Unsupported maximum fraction digits: ' + max);\n  }\n  this.maximumFractionDigits_ = max;\n  return this;\n};\n\n\n/**\n * Gets maximum number of fraction digits.\n * @return {number} The number of maximum fraction digits.\n */\ngoog.i18n.NumberFormat.prototype.getMaximumFractionDigits = function() {\n  return this.maximumFractionDigits_;\n};\n\n/**\n * Sets number of significant digits to show. Only fractions will be rounded.\n * Regardless of the number of significant digits set, the number of fractional\n * digits shown will always be capped by the maximum number of fractional digits\n * set on {@link #setMaximumFractionDigits}.\n * @param {number} number The number of significant digits to include.\n * @return {!goog.i18n.NumberFormat} Reference to this NumberFormat object.\n */\ngoog.i18n.NumberFormat.prototype.setSignificantDigits = function(number) {\n  if (this.minimumFractionDigits_ > 0 && number >= 0) {\n    throw new Error(\n        'Can\\'t combine significant digits and minimum fraction digits');\n  }\n  this.significantDigits_ = number;\n  return this;\n};\n\n\n/**\n * Gets number of significant digits to show. Only fractions will be rounded.\n * @return {number} The number of significant digits to include.\n */\ngoog.i18n.NumberFormat.prototype.getSignificantDigits = function() {\n  return this.significantDigits_;\n};\n\n\n/**\n * Sets whether trailing fraction zeros should be shown when significantDigits_\n * is positive. If this is true and significantDigits_ is 2, 1 will be formatted\n * as '1.0'.\n * @param {boolean} showTrailingZeros Whether trailing zeros should be shown.\n * @return {!goog.i18n.NumberFormat} Reference to this NumberFormat object.\n */\ngoog.i18n.NumberFormat.prototype.setShowTrailingZeros = function(\n    showTrailingZeros) {\n  this.showTrailingZeros_ = showTrailingZeros;\n  return this;\n};\n\n\n/**\n * Sets a number to base the formatting on when compact style formatting is\n * used. If this is null, the formatting should be based only on the number to\n * be formatting.\n *\n * This base formatting number can be used to format the target number as\n * another number would be formatted. For example, 100,000 is normally formatted\n * as \"100K\" in the COMPACT_SHORT format. To instead format it as '0.1M', the\n * base number could be set to 1,000,000 in order to force all numbers to be\n * formatted in millions. Similarly, 1,000,000,000 would normally be formatted\n * as '1B' and setting the base formatting number to 1,000,000, would cause it\n * to be formatted instead as '1,000M'.\n *\n * @param {?number} baseFormattingNumber The number to base formatting on, or\n * null if formatting should not be based on another number.\n * @return {!goog.i18n.NumberFormat} Reference to this NumberFormat object.\n */\ngoog.i18n.NumberFormat.prototype.setBaseFormatting = function(\n    baseFormattingNumber) {\n  goog.asserts.assert(\n      baseFormattingNumber === null || isFinite(baseFormattingNumber));\n  this.baseFormattingNumber_ = baseFormattingNumber;\n  return this;\n};\n\n\n/**\n * Gets the number on which compact formatting is currently based, or null if\n * no such number is set. See setBaseFormatting() for more information.\n * @return {?number}\n */\ngoog.i18n.NumberFormat.prototype.getBaseFormatting = function() {\n  return this.baseFormattingNumber_;\n};\n\n\n/**\n * Apply provided pattern, result are stored in member variables.\n *\n * @param {string} pattern String pattern being applied.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.applyPattern_ = function(pattern) {\n  this.pattern_ = pattern.replace(/ /g, '\\u00a0');\n  var pos = [0];\n\n  this.positivePrefix_ = this.parseAffix_(pattern, pos);\n  var trunkStart = pos[0];\n  this.parseTrunk_(pattern, pos);\n  var trunkLen = pos[0] - trunkStart;\n  this.positiveSuffix_ = this.parseAffix_(pattern, pos);\n  if (pos[0] < pattern.length &&\n      pattern.charAt(pos[0]) == goog.i18n.NumberFormat.PATTERN_SEPARATOR_) {\n    pos[0]++;\n    if (this.multiplier_ != 1) this.negativePercentSignExpected_ = true;\n    this.negativePrefix_ = this.parseAffix_(pattern, pos);\n    // we assume this part is identical to positive part.\n    // user must make sure the pattern is correctly constructed.\n    pos[0] += trunkLen;\n    this.negativeSuffix_ = this.parseAffix_(pattern, pos);\n  } else {\n    // if no negative affix specified, they share the same positive affix\n    this.negativePrefix_ += this.positivePrefix_;\n    this.negativeSuffix_ += this.positiveSuffix_;\n  }\n};\n\n\n/**\n * Apply a predefined pattern to NumberFormat object.\n * @param {number} patternType The number that indicates a predefined number\n *     format pattern.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.applyStandardPattern_ = function(patternType) {\n  switch (patternType) {\n    case goog.i18n.NumberFormat.Format.DECIMAL:\n      this.applyPattern_(this.getNumberFormatSymbols_().DECIMAL_PATTERN);\n      break;\n    case goog.i18n.NumberFormat.Format.SCIENTIFIC:\n      this.applyPattern_(this.getNumberFormatSymbols_().SCIENTIFIC_PATTERN);\n      break;\n    case goog.i18n.NumberFormat.Format.PERCENT:\n      this.applyPattern_(this.getNumberFormatSymbols_().PERCENT_PATTERN);\n      break;\n    case goog.i18n.NumberFormat.Format.CURRENCY:\n      this.applyPattern_(goog.i18n.currency.adjustPrecision(\n          this.getNumberFormatSymbols_().CURRENCY_PATTERN,\n          this.getCurrencyCode_()));\n      break;\n    case goog.i18n.NumberFormat.Format.COMPACT_SHORT:\n      this.applyCompactStyle_(goog.i18n.NumberFormat.CompactStyle.SHORT);\n      break;\n    case goog.i18n.NumberFormat.Format.COMPACT_LONG:\n      this.applyCompactStyle_(goog.i18n.NumberFormat.CompactStyle.LONG);\n      break;\n    default:\n      throw new Error('Unsupported pattern type.');\n  }\n};\n\n\n/**\n * Apply a predefined pattern for shorthand formats.\n * @param {goog.i18n.NumberFormat.CompactStyle} style the compact style to\n *     set defaults for.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.applyCompactStyle_ = function(style) {\n  this.compactStyle_ = style;\n  this.applyPattern_(this.getNumberFormatSymbols_().DECIMAL_PATTERN);\n  this.setMinimumFractionDigits(0);\n  this.setMaximumFractionDigits(2);\n  this.setSignificantDigits(2);\n};\n\n\n/**\n * Parses text string to produce a Number.\n *\n * This method attempts to parse text starting from position \"opt_pos\" if it\n * is given. Otherwise the parse will start from the beginning of the text.\n * When opt_pos presents, opt_pos will be updated to the character next to where\n * parsing stops after the call. If an error occurs, opt_pos won't be updated.\n *\n * @param {string} text The string to be parsed.\n * @param {Array<number>=} opt_pos Position to pass in and get back.\n * @return {number} Parsed number. This throws an error if the text cannot be\n *     parsed.\n */\ngoog.i18n.NumberFormat.prototype.parse = function(text, opt_pos) {\n  var pos = opt_pos || [0];\n\n  if (this.compactStyle_ != goog.i18n.NumberFormat.CompactStyle.NONE) {\n    throw new Error('Parsing of compact numbers is unimplemented');\n  }\n\n  var ret = NaN;\n\n  // We don't want to handle multiple kinds of space in parsing, normalize the\n  // regular and narrow nbsp to nbsp.\n  text = text.replace(/ |\\u202f/g, '\\u00a0');\n\n  var gotPositive = text.indexOf(this.positivePrefix_, pos[0]) == pos[0];\n  var gotNegative = text.indexOf(this.negativePrefix_, pos[0]) == pos[0];\n\n  // check for the longest match\n  if (gotPositive && gotNegative) {\n    if (this.positivePrefix_.length > this.negativePrefix_.length) {\n      gotNegative = false;\n    } else if (this.positivePrefix_.length < this.negativePrefix_.length) {\n      gotPositive = false;\n    }\n  }\n\n  if (gotPositive) {\n    pos[0] += this.positivePrefix_.length;\n  } else if (gotNegative) {\n    pos[0] += this.negativePrefix_.length;\n  }\n\n  // process digits or Inf, find decimal position\n  if (text.indexOf(this.getNumberFormatSymbols_().INFINITY, pos[0]) == pos[0]) {\n    pos[0] += this.getNumberFormatSymbols_().INFINITY.length;\n    ret = Infinity;\n  } else {\n    ret = this.parseNumber_(text, pos);\n  }\n\n  // check for suffix\n  if (gotPositive) {\n    if (!(text.indexOf(this.positiveSuffix_, pos[0]) == pos[0])) {\n      return NaN;\n    }\n    pos[0] += this.positiveSuffix_.length;\n  } else if (gotNegative) {\n    if (!(text.indexOf(this.negativeSuffix_, pos[0]) == pos[0])) {\n      return NaN;\n    }\n    pos[0] += this.negativeSuffix_.length;\n  }\n\n  return gotNegative ? -ret : ret;\n};\n\n\n/**\n * This function will parse a \"localized\" text into a Number. It needs to\n * handle locale specific decimal, grouping, exponent and digits.\n *\n * @param {string} text The text that need to be parsed.\n * @param {Array<number>} pos  In/out parsing position. In case of failure,\n *    pos value won't be changed.\n * @return {number} Number value, or NaN if nothing can be parsed.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.parseNumber_ = function(text, pos) {\n  var sawDecimal = false;\n  var sawExponent = false;\n  var sawDigit = false;\n  var exponentPos = -1;\n  var scale = 1;\n  var decimal = this.getNumberFormatSymbols_().DECIMAL_SEP;\n  var grouping = this.getNumberFormatSymbols_().GROUP_SEP;\n  var exponentChar = this.getNumberFormatSymbols_().EXP_SYMBOL;\n\n  if (this.compactStyle_ != goog.i18n.NumberFormat.CompactStyle.NONE) {\n    throw new Error('Parsing of compact style numbers is not implemented');\n  }\n\n  // We don't want to handle multiple kinds of space in parsing, normalize the\n  // narrow nbsp to nbsp.\n  grouping = grouping.replace(/\\u202f/g, '\\u00a0');\n\n  var normalizedText = '';\n  for (; pos[0] < text.length; pos[0]++) {\n    var ch = text.charAt(pos[0]);\n    var digit = this.getDigit_(ch);\n    if (digit >= 0 && digit <= 9) {\n      normalizedText += digit;\n      sawDigit = true;\n    } else if (ch == decimal.charAt(0)) {\n      if (sawDecimal || sawExponent) {\n        break;\n      }\n      normalizedText += '.';\n      sawDecimal = true;\n    } else if (\n        ch == grouping.charAt(0) &&\n        ('\\u00a0' != grouping.charAt(0) ||\n         pos[0] + 1 < text.length &&\n             this.getDigit_(text.charAt(pos[0] + 1)) >= 0)) {\n      // Got a grouping character here. When grouping character is nbsp, need\n      // to make sure the character following it is a digit.\n      if (sawDecimal || sawExponent) {\n        break;\n      }\n      continue;\n    } else if (ch == exponentChar.charAt(0)) {\n      if (sawExponent) {\n        break;\n      }\n      normalizedText += 'E';\n      sawExponent = true;\n      exponentPos = pos[0];\n    } else if (ch == '+' || ch == '-') {\n      // Stop parsing if a '+' or '-' sign is found after digits have been found\n      // but it's not located right after an exponent sign.\n      if (sawDigit && exponentPos != pos[0] - 1) {\n        break;\n      }\n      normalizedText += ch;\n    } else if (\n        this.multiplier_ == 1 &&\n        ch == this.getNumberFormatSymbols_().PERCENT.charAt(0)) {\n      // Parse the percent character as part of the number only when it's\n      // not already included in the pattern.\n      if (scale != 1) {\n        break;\n      }\n      scale = 100;\n      if (sawDigit) {\n        pos[0]++;  // eat this character if parse end here\n        break;\n      }\n    } else if (\n        this.multiplier_ == 1 &&\n        ch == this.getNumberFormatSymbols_().PERMILL.charAt(0)) {\n      // Parse the permill character as part of the number only when it's\n      // not already included in the pattern.\n      if (scale != 1) {\n        break;\n      }\n      scale = 1000;\n      if (sawDigit) {\n        pos[0]++;  // eat this character if parse end here\n        break;\n      }\n    } else {\n      break;\n    }\n  }\n\n  // Scale the number when the percent/permill character was included in\n  // the pattern.\n  if (this.multiplier_ != 1) {\n    scale = this.multiplier_;\n  }\n\n  return parseFloat(normalizedText) / scale;\n};\n\n\n/**\n * Formats a Number to produce a string.\n *\n * @param {number} number The Number to be formatted.\n * @return {string} The formatted number string.\n */\ngoog.i18n.NumberFormat.prototype.format = function(number) {\n  if (isNaN(number)) {\n    return this.getNumberFormatSymbols_().NAN;\n  }\n\n  var parts = [];\n  var baseFormattingNumber = (this.baseFormattingNumber_ === null) ?\n      number :\n      this.baseFormattingNumber_;\n  var unit = this.getUnitAfterRounding_(baseFormattingNumber, number);\n  number = goog.i18n.NumberFormat.decimalShift_(number, -unit.divisorBase);\n\n  parts.push(unit.prefix);\n\n  // in icu code, it is commented that certain computation need to keep the\n  // negative sign for 0.\n  var isNegative = number < 0.0 || number == 0.0 && 1 / number < 0.0;\n\n  parts.push(isNegative ? this.negativePrefix_ : this.positivePrefix_);\n\n  if (!isFinite(number)) {\n    parts.push(this.getNumberFormatSymbols_().INFINITY);\n  } else {\n    // convert number to non-negative value\n    number *= isNegative ? -1 : 1;\n\n    number *= this.multiplier_;\n    this.useExponentialNotation_ ?\n        this.subformatExponential_(number, parts) :\n        this.subformatFixed_(number, this.minimumIntegerDigits_, parts);\n  }\n\n  parts.push(isNegative ? this.negativeSuffix_ : this.positiveSuffix_);\n  parts.push(unit.suffix);\n\n  return parts.join('');\n};\n\n\n/**\n * Round a number into an integer and fractional part\n * based on the rounding rules for this NumberFormat.\n * @param {number} number The number to round.\n * @return {{intValue: number, fracValue: number}} The integer and fractional\n *     part after rounding.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.roundNumber_ = function(number) {\n  var shift = goog.i18n.NumberFormat.decimalShift_;\n\n  var shiftedNumber = shift(number, this.maximumFractionDigits_);\n  if (this.significantDigits_ > 0) {\n    shiftedNumber = this.roundToSignificantDigits_(\n        shiftedNumber, this.significantDigits_, this.maximumFractionDigits_);\n  }\n  shiftedNumber = Math.round(shiftedNumber);\n\n  var intValue, fracValue;\n  if (isFinite(shiftedNumber)) {\n    intValue = Math.floor(shift(shiftedNumber, -this.maximumFractionDigits_));\n    fracValue = Math.floor(\n        shiftedNumber - shift(intValue, this.maximumFractionDigits_));\n  } else {\n    intValue = number;\n    fracValue = 0;\n  }\n  return {intValue: intValue, fracValue: fracValue};\n};\n\n\n/**\n * Formats a number with the appropriate groupings when there are repeating\n * digits present. Repeating digits exists when the length of the digits left\n * of the decimal place exceeds the number of non-repeating digits.\n *\n * Formats a number by iterating through the integer number (intPart) from the\n * most left of the decimal place by inserting the appropriate number grouping\n * separator for the repeating digits until all of the repeating digits is\n * iterated. Then iterate through the non-repeating digits by inserting the\n * appropriate number grouping separator until all the non-repeating digits\n * is iterated through.\n *\n * In the number grouping concept, anything left of the decimal\n * place is followed by non-repeating digits and then repeating digits. If the\n * pattern is #,##,###, then we first (from the left of the decimal place) have\n * a non-repeating digit of size 3 followed by repeating digits of size 2\n * separated by a thousand separator. If the length of the digits are six or\n * more, there may be repeating digits required. For example, the value of\n * 12345678 would format as 1,23,45,678 where the repeating digit is length 2.\n *\n * @param {!Array<string>} parts An array to build the 'parts' of the formatted\n *  number including the values and separators.\n * @param {number} zeroCode The value of the zero digit whether or not\n *  goog.i18n.NumberFormat.enforceAsciiDigits_ is enforced.\n * @param {string} intPart The integer representation of the number to be\n *  formatted and referenced.\n * @param {!Array<number>} groupingArray The array of numbers to determine the\n *  grouping of repeated and non-repeated digits.\n * @param {number} repeatedDigitLen The length of the repeated digits left of\n *  the non-repeating digits left of the decimal.\n * @return {!Array<string>} Returns the resulting parts variable containing\n *  how numbers are to be grouped and appear.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.formatNumberGroupingRepeatingDigitsParts_ =\n    function(parts, zeroCode, intPart, groupingArray, repeatedDigitLen) {\n  // Keep track of how much has been completed on the non repeated groups\n  var nonRepeatedGroupCompleteCount = 0;\n  var currentGroupSizeIndex = 0;\n  var currentGroupSize = 0;\n\n  var grouping = this.getNumberFormatSymbols_().GROUP_SEP;\n  var digitLen = intPart.length;\n\n  // There are repeating digits and non-repeating digits\n  for (var i = 0; i < digitLen; i++) {\n    parts.push(String.fromCharCode(zeroCode + Number(intPart.charAt(i)) * 1));\n    if (digitLen - i > 1) {\n      currentGroupSize = groupingArray[currentGroupSizeIndex];\n      if (i < repeatedDigitLen) {\n        // Process the left side (the repeated number groups)\n        var repeatedDigitIndex = repeatedDigitLen - i;\n        // Edge case if there's a number grouping asking for \"1\" group at\n        // a time; otherwise, if the remainder is 1, there's the separator\n        if (currentGroupSize === 1 ||\n            (currentGroupSize > 0 &&\n             (repeatedDigitIndex % currentGroupSize) === 1)) {\n          parts.push(grouping);\n        }\n      } else if (currentGroupSizeIndex < groupingArray.length) {\n        // Process the right side (the non-repeated fixed number groups)\n        if (i === repeatedDigitLen) {\n          // Increase the group index because a separator\n          // has previously added in the earlier logic\n          currentGroupSizeIndex += 1;\n        } else if (\n            currentGroupSize ===\n            i - repeatedDigitLen - nonRepeatedGroupCompleteCount + 1) {\n          // Otherwise, just iterate to the right side and\n          // add a separator once the length matches to the expected\n          parts.push(grouping);\n          // Keep track of what has been completed on the right\n          nonRepeatedGroupCompleteCount += currentGroupSize;\n          currentGroupSizeIndex += 1;  // Get to the next number grouping\n        }\n      }\n    }\n  }\n  return parts;\n};\n\n\n/**\n * Formats a number with the appropriate groupings when there are no repeating\n * digits present. Non-repeating digits exists when the length of the digits\n * left of the decimal place is equal or lesser than the length of\n * non-repeating digits.\n *\n * Formats a number by iterating through the integer number (intPart) from the\n * right most non-repeating number group of the decimal place. For each group,\n * inserting the appropriate number grouping separator for the non-repeating\n * digits until the number is completely iterated.\n *\n * In the number grouping concept, anything left of the decimal\n * place is followed by non-repeating digits and then repeating digits. If the\n * pattern is #,##,###, then we first (from the left of the decimal place) have\n * a non-repeating digit of size 3 followed by repeating digits of size 2\n * separated by a thousand separator. If the length of the digits are five or\n * less, there won't be any repeating digits required. For example, the value\n * of 12345 would be formatted as 12,345 where the non-repeating digit is of\n * length 3.\n *\n * @param {!Array<string>} parts An array to build the 'parts' of the formatted\n *  number including the values and separators.\n * @param {number} zeroCode The value of the zero digit whether or not\n *  goog.i18n.NumberFormat.enforceAsciiDigits_ is enforced.\n * @param {string} intPart The integer representation of the number to be\n *  formatted and referenced.\n * @param {!Array<number>} groupingArray The array of numbers to determine the\n *  grouping of repeated and non-repeated digits.\n * @return {!Array<string>} Returns the resulting parts variable containing\n *  how numbers are to be grouped and appear.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.formatNumberGroupingNonRepeatingDigitsParts_ =\n    function(parts, zeroCode, intPart, groupingArray) {\n  // Keep track of how much has been completed on the non repeated groups\n  var grouping = this.getNumberFormatSymbols_().GROUP_SEP;\n  var currentGroupSizeIndex;\n  var currentGroupSize = 0;\n  var digitLenLeft = intPart.length;\n  var rightToLeftParts = [];\n\n  // Start from the right most non-repeating group and work inwards\n  for (currentGroupSizeIndex = groupingArray.length - 1;\n       currentGroupSizeIndex >= 0 && digitLenLeft > 0;\n       currentGroupSizeIndex--) {\n    currentGroupSize = groupingArray[currentGroupSizeIndex];\n    // Iterate from the right most digit\n    for (var rightDigitIndex = 0; rightDigitIndex < currentGroupSize &&\n         ((digitLenLeft - rightDigitIndex - 1) >= 0);\n         rightDigitIndex++) {\n      rightToLeftParts.push(String.fromCharCode(\n          zeroCode +\n          Number(intPart.charAt(digitLenLeft - rightDigitIndex - 1)) * 1));\n    }\n    // Update the number of digits left\n    digitLenLeft -= currentGroupSize;\n    if (digitLenLeft > 0) {\n      rightToLeftParts.push(grouping);\n    }\n  }\n  // Reverse and push onto the remaining parts\n  parts.push.apply(parts, rightToLeftParts.reverse());\n\n  return parts;\n};\n\n\n/**\n * Formats a Number in fraction format.\n *\n * @param {number} number\n * @param {number} minIntDigits Minimum integer digits.\n * @param {Array<string>} parts\n *     This array holds the pieces of formatted string.\n *     This function will add its formatted pieces to the array.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.subformatFixed_ = function(\n    number, minIntDigits, parts) {\n  if (this.minimumFractionDigits_ > this.maximumFractionDigits_) {\n    throw new Error('Min value must be less than max value');\n  }\n\n  if (!parts) {\n    parts = [];\n  }\n\n  var rounded = this.roundNumber_(number);\n  var intValue = rounded.intValue;\n  var fracValue = rounded.fracValue;\n\n  var numIntDigits = (intValue == 0) ? 0 : this.intLog10_(intValue) + 1;\n  var fractionPresent = this.minimumFractionDigits_ > 0 || fracValue > 0 ||\n      (this.showTrailingZeros_ && numIntDigits < this.significantDigits_);\n  var minimumFractionDigits = this.minimumFractionDigits_;\n  if (fractionPresent) {\n    if (this.showTrailingZeros_ && this.significantDigits_ > 0) {\n      minimumFractionDigits = this.significantDigits_ - numIntDigits;\n    } else {\n      minimumFractionDigits = this.minimumFractionDigits_;\n    }\n  }\n\n  var intPart = '';\n  var translatableInt = intValue;\n  while (translatableInt > 1E20) {\n    // here it goes beyond double precision, add '0' make it look better\n    intPart = '0' + intPart;\n    translatableInt =\n        Math.round(goog.i18n.NumberFormat.decimalShift_(translatableInt, -1));\n  }\n  intPart = translatableInt + intPart;\n\n  var decimal = this.getNumberFormatSymbols_().DECIMAL_SEP;\n  var zeroCode = this.getNumberFormatSymbols_().ZERO_DIGIT.charCodeAt(0);\n  var digitLen = intPart.length;\n  var nonRepeatedGroupCount = 0;\n\n  if (intValue > 0 || minIntDigits > 0) {\n    for (var i = digitLen; i < minIntDigits; i++) {\n      parts.push(String.fromCharCode(zeroCode));\n    }\n\n    // If there's more than 1 number grouping,\n    // figure out the length of the non-repeated groupings (on the right)\n    if (this.groupingArray_.length >= 2) {\n      for (var j = 1; j < this.groupingArray_.length; j++) {\n        nonRepeatedGroupCount += this.groupingArray_[j];\n      }\n    }\n\n    // Anything left of the fixed number grouping is repeated,\n    // figure out the length of repeated groupings (on the left)\n    var repeatedDigitLen = digitLen - nonRepeatedGroupCount;\n    if (repeatedDigitLen > 0) {\n      // There are repeating digits and non-repeating digits\n      parts = this.formatNumberGroupingRepeatingDigitsParts_(\n          parts, zeroCode, intPart, this.groupingArray_, repeatedDigitLen);\n    } else {\n      // There are no repeating digits and only non-repeating digits\n      parts = this.formatNumberGroupingNonRepeatingDigitsParts_(\n          parts, zeroCode, intPart, this.groupingArray_);\n    }\n  } else if (!fractionPresent) {\n    // If there is no fraction present, and we haven't printed any\n    // integer digits, then print a zero.\n    parts.push(String.fromCharCode(zeroCode));\n  }\n\n  // Output the decimal separator if we always do so.\n  if (this.decimalSeparatorAlwaysShown_ || fractionPresent) {\n    parts.push(decimal);\n  }\n\n  var fracPart = String(fracValue);\n  // Handle case where fracPart is in scientific notation.\n  var fracPartSplit = fracPart.split('e+');\n  if (fracPartSplit.length == 2) {\n    // Only keep significant digits.\n    var floatFrac = parseFloat(fracPartSplit[0]);\n    fracPart = String(\n        this.roundToSignificantDigits_(floatFrac, this.significantDigits_, 1));\n    fracPart = fracPart.replace('.', '');\n    // Append zeroes based on the exponent.\n    var exp = parseInt(fracPartSplit[1], 10);\n    fracPart += goog.string.repeat('0', exp - fracPart.length + 1);\n  }\n\n  // Add Math.pow(10, this.maximumFractionDigits) to fracPart. Uses string ops\n  // to avoid complexity with scientific notation and overflows.\n  if (this.maximumFractionDigits_ + 1 > fracPart.length) {\n    var zeroesToAdd = this.maximumFractionDigits_ - fracPart.length;\n    fracPart = '1' + goog.string.repeat('0', zeroesToAdd) + fracPart;\n  }\n\n  var fracLen = fracPart.length;\n  while (fracPart.charAt(fracLen - 1) == '0' &&\n         fracLen > minimumFractionDigits + 1) {\n    fracLen--;\n  }\n\n  for (var i = 1; i < fracLen; i++) {\n    parts.push(String.fromCharCode(zeroCode + Number(fracPart.charAt(i)) * 1));\n  }\n};\n\n\n/**\n * Formats exponent part of a Number.\n *\n * @param {number} exponent Exponential value.\n * @param {Array<string>} parts The array that holds the pieces of formatted\n *     string. This function will append more formatted pieces to the array.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.addExponentPart_ = function(exponent, parts) {\n  parts.push(this.getNumberFormatSymbols_().EXP_SYMBOL);\n\n  if (exponent < 0) {\n    exponent = -exponent;\n    parts.push(this.getNumberFormatSymbols_().MINUS_SIGN);\n  } else if (this.useSignForPositiveExponent_) {\n    parts.push(this.getNumberFormatSymbols_().PLUS_SIGN);\n  }\n\n  var exponentDigits = '' + exponent;\n  var zeroChar = this.getNumberFormatSymbols_().ZERO_DIGIT;\n  for (var i = exponentDigits.length; i < this.minExponentDigits_; i++) {\n    parts.push(zeroChar);\n  }\n  parts.push(exponentDigits);\n};\n\n/**\n * Returns the mantissa for the given value and its exponent.\n *\n * @param {number} value\n * @param {number} exponent\n * @return {number}\n * @private\n */\ngoog.i18n.NumberFormat.prototype.getMantissa_ = function(value, exponent) {\n  return goog.i18n.NumberFormat.decimalShift_(value, -exponent);\n};\n\n/**\n * Formats Number in exponential format.\n *\n * @param {number} number Value need to be formatted.\n * @param {Array<string>} parts The array that holds the pieces of formatted\n *     string. This function will append more formatted pieces to the array.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.subformatExponential_ = function(\n    number, parts) {\n  if (number == 0.0) {\n    this.subformatFixed_(number, this.minimumIntegerDigits_, parts);\n    this.addExponentPart_(0, parts);\n    return;\n  }\n\n  var exponent = goog.math.safeFloor(Math.log(number) / Math.log(10));\n  number = this.getMantissa_(number, exponent);\n\n  var minIntDigits = this.minimumIntegerDigits_;\n  if (this.maximumIntegerDigits_ > 1 &&\n      this.maximumIntegerDigits_ > this.minimumIntegerDigits_) {\n    // A repeating range is defined; adjust to it as follows.\n    // If repeat == 3, we have 6,5,4=>3; 3,2,1=>0; 0,-1,-2=>-3;\n    // -3,-4,-5=>-6, etc. This takes into account that the\n    // exponent we have here is off by one from what we expect;\n    // it is for the format 0.MMMMMx10^n.\n    var remainder = exponent % this.maximumIntegerDigits_;\n    if (remainder < 0) {\n      remainder = this.maximumIntegerDigits_ + remainder;\n    }\n\n    number = goog.i18n.NumberFormat.decimalShift_(number, remainder);\n    exponent -= remainder;\n\n    minIntDigits = 1;\n  } else {\n    // No repeating range is defined; use minimum integer digits.\n    if (this.minimumIntegerDigits_ < 1) {\n      exponent++;\n      number = goog.i18n.NumberFormat.decimalShift_(number, -1);\n    } else {\n      exponent -= this.minimumIntegerDigits_ - 1;\n      number = goog.i18n.NumberFormat.decimalShift_(\n          number, this.minimumIntegerDigits_ - 1);\n    }\n  }\n  this.subformatFixed_(number, minIntDigits, parts);\n  this.addExponentPart_(exponent, parts);\n};\n\n\n/**\n * Returns the digit value of current character. The character could be either\n * '0' to '9', or a locale specific digit.\n *\n * @param {string} ch Character that represents a digit.\n * @return {number} The digit value, or -1 on error.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.getDigit_ = function(ch) {\n  var code = ch.charCodeAt(0);\n  // between '0' to '9'\n  if (48 <= code && code < 58) {\n    return code - 48;\n  } else {\n    var zeroCode = this.getNumberFormatSymbols_().ZERO_DIGIT.charCodeAt(0);\n    return zeroCode <= code && code < zeroCode + 10 ? code - zeroCode : -1;\n  }\n};\n\n\n// ----------------------------------------------------------------------\n// CONSTANTS\n// ----------------------------------------------------------------------\n// Constants for characters used in programmatic (unlocalized) patterns.\n/**\n * A zero digit character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_ = '0';\n\n\n/**\n * A grouping separator character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_ = ',';\n\n\n/**\n * A decimal separator character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_ = '.';\n\n\n/**\n * A per mille character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_PER_MILLE_ = '\\u2030';\n\n\n/**\n * A percent character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_PERCENT_ = '%';\n\n\n/**\n * A digit character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_DIGIT_ = '#';\n\n\n/**\n * A separator character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_SEPARATOR_ = ';';\n\n\n/**\n * An exponent character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_EXPONENT_ = 'E';\n\n\n/**\n * A plus character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_PLUS_ = '+';\n\n\n/**\n * A generic currency sign character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_ = '\\u00A4';\n\n\n/**\n * A quote character.\n * @type {string}\n * @private\n */\ngoog.i18n.NumberFormat.QUOTE_ = '\\'';\n\n\n/**\n * Parses affix part of pattern.\n *\n * @param {string} pattern Pattern string that need to be parsed.\n * @param {Array<number>} pos One element position array to set and receive\n *     parsing position.\n *\n * @return {string} Affix received from parsing.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.parseAffix_ = function(pattern, pos) {\n  var affix = '';\n  var inQuote = false;\n  var len = pattern.length;\n\n  for (; pos[0] < len; pos[0]++) {\n    var ch = pattern.charAt(pos[0]);\n    if (ch == goog.i18n.NumberFormat.QUOTE_) {\n      if (pos[0] + 1 < len &&\n          pattern.charAt(pos[0] + 1) == goog.i18n.NumberFormat.QUOTE_) {\n        pos[0]++;\n        affix += '\\'';  // 'don''t'\n      } else {\n        inQuote = !inQuote;\n      }\n      continue;\n    }\n\n    if (inQuote) {\n      affix += ch;\n    } else {\n      switch (ch) {\n        case goog.i18n.NumberFormat.PATTERN_DIGIT_:\n        case goog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_:\n        case goog.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_:\n        case goog.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_:\n        case goog.i18n.NumberFormat.PATTERN_SEPARATOR_:\n          return affix;\n        case goog.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_:\n          if ((pos[0] + 1) < len &&\n              pattern.charAt(pos[0] + 1) ==\n                  goog.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_) {\n            pos[0]++;\n            affix += this.getCurrencyCode_();\n          } else {\n            switch (this.currencyStyle_) {\n              case goog.i18n.NumberFormat.CurrencyStyle.LOCAL:\n                affix += goog.i18n.currency.getLocalCurrencySignWithFallback(\n                    this.getCurrencyCode_());\n                break;\n              case goog.i18n.NumberFormat.CurrencyStyle.GLOBAL:\n                affix += goog.i18n.currency.getGlobalCurrencySignWithFallback(\n                    this.getCurrencyCode_());\n                break;\n              case goog.i18n.NumberFormat.CurrencyStyle.PORTABLE:\n                affix += goog.i18n.currency.getPortableCurrencySignWithFallback(\n                    this.getCurrencyCode_());\n                break;\n              default:\n                break;\n            }\n          }\n          break;\n        case goog.i18n.NumberFormat.PATTERN_PERCENT_:\n          if (!this.negativePercentSignExpected_ && this.multiplier_ != 1) {\n            throw new Error('Too many percent/permill');\n          } else if (\n              this.negativePercentSignExpected_ && this.multiplier_ != 100) {\n            throw new Error('Inconsistent use of percent/permill characters');\n          }\n          this.multiplier_ = 100;\n          this.negativePercentSignExpected_ = false;\n          affix += this.getNumberFormatSymbols_().PERCENT;\n          break;\n        case goog.i18n.NumberFormat.PATTERN_PER_MILLE_:\n          if (!this.negativePercentSignExpected_ && this.multiplier_ != 1) {\n            throw new Error('Too many percent/permill');\n          } else if (\n              this.negativePercentSignExpected_ && this.multiplier_ != 1000) {\n            throw new Error('Inconsistent use of percent/permill characters');\n          }\n          this.multiplier_ = 1000;\n          this.negativePercentSignExpected_ = false;\n          affix += this.getNumberFormatSymbols_().PERMILL;\n          break;\n        default:\n          affix += ch;\n      }\n    }\n  }\n\n  return affix;\n};\n\n\n/**\n * Parses the trunk part of a pattern.\n *\n * @param {string} pattern Pattern string that need to be parsed.\n * @param {Array<number>} pos One element position array to set and receive\n *     parsing position.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.parseTrunk_ = function(pattern, pos) {\n  var decimalPos = -1;\n  var digitLeftCount = 0;\n  var zeroDigitCount = 0;\n  var digitRightCount = 0;\n  var groupingCount = -1;\n  var len = pattern.length;\n  for (var loop = true; pos[0] < len && loop; pos[0]++) {\n    var ch = pattern.charAt(pos[0]);\n    switch (ch) {\n      case goog.i18n.NumberFormat.PATTERN_DIGIT_:\n        if (zeroDigitCount > 0) {\n          digitRightCount++;\n        } else {\n          digitLeftCount++;\n        }\n        if (groupingCount >= 0 && decimalPos < 0) {\n          groupingCount++;\n        }\n        break;\n      case goog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_:\n        if (digitRightCount > 0) {\n          throw new Error('Unexpected \"0\" in pattern \"' + pattern + '\"');\n        }\n        zeroDigitCount++;\n        if (groupingCount >= 0 && decimalPos < 0) {\n          groupingCount++;\n        }\n        break;\n      case goog.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_:\n        if (groupingCount > 0) {\n          this.groupingArray_.push(groupingCount);\n        }\n        groupingCount = 0;\n        break;\n      case goog.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_:\n        if (decimalPos >= 0) {\n          throw new Error(\n              'Multiple decimal separators in pattern \"' + pattern + '\"');\n        }\n        decimalPos = digitLeftCount + zeroDigitCount + digitRightCount;\n        break;\n      case goog.i18n.NumberFormat.PATTERN_EXPONENT_:\n        if (this.useExponentialNotation_) {\n          throw new Error(\n              'Multiple exponential symbols in pattern \"' + pattern + '\"');\n        }\n        this.useExponentialNotation_ = true;\n        this.minExponentDigits_ = 0;\n\n        // exponent pattern can have a optional '+'.\n        if ((pos[0] + 1) < len &&\n            pattern.charAt(pos[0] + 1) ==\n                goog.i18n.NumberFormat.PATTERN_PLUS_) {\n          pos[0]++;\n          this.useSignForPositiveExponent_ = true;\n        }\n\n        // Use lookahead to parse out the exponential part\n        // of the pattern, then jump into phase 2.\n        while ((pos[0] + 1) < len &&\n               pattern.charAt(pos[0] + 1) ==\n                   goog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_) {\n          pos[0]++;\n          this.minExponentDigits_++;\n        }\n\n        if ((digitLeftCount + zeroDigitCount) < 1 ||\n            this.minExponentDigits_ < 1) {\n          throw new Error('Malformed exponential pattern \"' + pattern + '\"');\n        }\n        loop = false;\n        break;\n      default:\n        pos[0]--;\n        loop = false;\n        break;\n    }\n  }\n\n  if (zeroDigitCount == 0 && digitLeftCount > 0 && decimalPos >= 0) {\n    // Handle '###.###' and '###.' and '.###'\n    var n = decimalPos;\n    if (n == 0) {  // Handle '.###'\n      n++;\n    }\n    digitRightCount = digitLeftCount - n;\n    digitLeftCount = n - 1;\n    zeroDigitCount = 1;\n  }\n\n  // Do syntax checking on the digits.\n  if (decimalPos < 0 && digitRightCount > 0 ||\n      decimalPos >= 0 && (decimalPos < digitLeftCount ||\n                          decimalPos > digitLeftCount + zeroDigitCount) ||\n      groupingCount == 0) {\n    throw new Error('Malformed pattern \"' + pattern + '\"');\n  }\n  var totalDigits = digitLeftCount + zeroDigitCount + digitRightCount;\n\n  this.maximumFractionDigits_ = decimalPos >= 0 ? totalDigits - decimalPos : 0;\n  if (decimalPos >= 0) {\n    this.minimumFractionDigits_ = digitLeftCount + zeroDigitCount - decimalPos;\n    if (this.minimumFractionDigits_ < 0) {\n      this.minimumFractionDigits_ = 0;\n    }\n  }\n\n  // The effectiveDecimalPos is the position the decimal is at or would be at\n  // if there is no decimal. Note that if decimalPos<0, then digitTotalCount ==\n  // digitLeftCount + zeroDigitCount.\n  var effectiveDecimalPos = decimalPos >= 0 ? decimalPos : totalDigits;\n  this.minimumIntegerDigits_ = effectiveDecimalPos - digitLeftCount;\n  if (this.useExponentialNotation_) {\n    this.maximumIntegerDigits_ = digitLeftCount + this.minimumIntegerDigits_;\n\n    // in exponential display, we need to at least show something.\n    if (this.maximumFractionDigits_ == 0 && this.minimumIntegerDigits_ == 0) {\n      this.minimumIntegerDigits_ = 1;\n    }\n  }\n\n  // Add another number grouping at the end\n  this.groupingArray_.push(Math.max(0, groupingCount));\n  this.decimalSeparatorAlwaysShown_ =\n      decimalPos == 0 || decimalPos == totalDigits;\n};\n\n\n/**\n * Alias for the compact format 'unit' object.\n * @typedef {{\n *     prefix: string,\n *     suffix: string,\n *     divisorBase: number\n * }}\n */\ngoog.i18n.NumberFormat.CompactNumberUnit;\n\n\n/**\n * The empty unit, corresponding to a base of 0.\n * @private {!goog.i18n.NumberFormat.CompactNumberUnit}\n */\ngoog.i18n.NumberFormat.NULL_UNIT_ = {\n  prefix: '',\n  suffix: '',\n  divisorBase: 0\n};\n\n\n/**\n * Get compact unit for a certain number of digits\n *\n * @param {number} base The number of digits to get the unit for.\n * @param {string} plurality The plurality of the number.\n * @return {!goog.i18n.NumberFormat.CompactNumberUnit} The compact unit.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.getUnitFor_ = function(base, plurality) {\n  var table = this.compactStyle_ == goog.i18n.NumberFormat.CompactStyle.SHORT ?\n      goog.i18n.CompactNumberFormatSymbols.COMPACT_DECIMAL_SHORT_PATTERN :\n      goog.i18n.CompactNumberFormatSymbols.COMPACT_DECIMAL_LONG_PATTERN;\n\n  if (table == null) {\n    table = goog.i18n.CompactNumberFormatSymbols.COMPACT_DECIMAL_SHORT_PATTERN;\n  }\n\n  if (base < 3) {\n    return goog.i18n.NumberFormat.NULL_UNIT_;\n  } else {\n    var shift = goog.i18n.NumberFormat.decimalShift_;\n\n    base = Math.min(14, base);\n    var patterns = table[shift(1, base)];\n    var previousNonNullBase = base - 1;\n    while (!patterns && previousNonNullBase >= 3) {\n      patterns = table[shift(1, previousNonNullBase)];\n      previousNonNullBase--;\n    }\n    if (!patterns) {\n      return goog.i18n.NumberFormat.NULL_UNIT_;\n    }\n\n    var pattern = patterns[plurality];\n    if (!pattern || pattern == '0') {\n      return goog.i18n.NumberFormat.NULL_UNIT_;\n    }\n\n    var parts = /([^0]*)(0+)(.*)/.exec(pattern);\n    if (!parts) {\n      return goog.i18n.NumberFormat.NULL_UNIT_;\n    }\n\n    return {\n      prefix: parts[1],\n      suffix: parts[3],\n      divisorBase: (previousNonNullBase + 1) - (parts[2].length - 1)\n    };\n  }\n};\n\n\n/**\n * Get the compact unit divisor, accounting for rounding of the quantity.\n *\n * @param {number} formattingNumber The number to base the formatting on. The\n *     unit will be calculated from this number.\n * @param {number} pluralityNumber The number to use for calculating the\n *     plurality.\n * @return {!goog.i18n.NumberFormat.CompactNumberUnit} The unit after rounding.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.getUnitAfterRounding_ = function(\n    formattingNumber, pluralityNumber) {\n  if (this.compactStyle_ == goog.i18n.NumberFormat.CompactStyle.NONE) {\n    return goog.i18n.NumberFormat.NULL_UNIT_;\n  }\n\n  formattingNumber = Math.abs(formattingNumber);\n  pluralityNumber = Math.abs(pluralityNumber);\n\n  var initialPlurality = this.pluralForm_(formattingNumber);\n  // Compute the exponent from the formattingNumber, to compute the unit.\n  var base = formattingNumber <= 1 ? 0 : this.intLog10_(formattingNumber);\n  var initialDivisor = this.getUnitFor_(base, initialPlurality).divisorBase;\n  // Round both numbers based on the unit used.\n  var pluralityAttempt =\n      goog.i18n.NumberFormat.decimalShift_(pluralityNumber, -initialDivisor);\n  var pluralityRounded = this.roundNumber_(pluralityAttempt);\n  var formattingAttempt =\n      goog.i18n.NumberFormat.decimalShift_(formattingNumber, -initialDivisor);\n  var formattingRounded = this.roundNumber_(formattingAttempt);\n  // Compute the plurality of the pluralityNumber when formatted using the name\n  // units as the formattingNumber.\n  var finalPlurality =\n      this.pluralForm_(pluralityRounded.intValue + pluralityRounded.fracValue);\n  // Get the final unit, using the rounded formatting number to get the correct\n  // unit, and the plurality computed from the pluralityNumber.\n  return this.getUnitFor_(\n      initialDivisor + this.intLog10_(formattingRounded.intValue),\n      finalPlurality);\n};\n\n\n/**\n * Get the integer base 10 logarithm of a number.\n *\n * @param {number} number The number to log.\n * @return {number} The lowest integer n such that 10^n >= number.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.intLog10_ = function(number) {\n  // Handle infinity.\n  if (!isFinite(number)) {\n    return number > 0 ? number : 0;\n  }\n  // Turns out Math.log(1000000)/Math.LN10 is strictly less than 6.\n  // TODO(nickreid): Make this use `decimalShift_` or use another more effecient\n  // string-based method.\n  var i = 0;\n  while ((number /= 10) >= 1) i++;\n  return i;\n};\n\n/**\n * Shifts `number` by `digitCount` decimal digits.\n *\n * This function corrects for rounding error that may occur when naively\n * multiplying or dividing by a power of 10. See:\n * https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems\n * Example: `1.1e27 / Math.pow(10, 12)  != 1.1e15`.\n *\n * This function does not correct for inherent limitations in the precision of\n * JavaScript numbers.\n *\n * @param {number} number The number to shift.\n * @param {number} digitCount The number of places by which to shift number.\n *     Must be an integer. May be positive or negative.\n * @return {number}\n * @private\n */\ngoog.i18n.NumberFormat.decimalShift_ = function(number, digitCount) {\n  goog.asserts.assert(\n      digitCount % 1 == 0, 'Cannot shift by fractional digits \"%s\".',\n      digitCount);\n\n  // Make sure to cover all numbers that stringify to something that doesn't\n  // look like a number.\n  if (!number || !isFinite(number) || digitCount == 0) {\n    return number;\n  }\n\n  // This method isn't efficient, but it has the exact behaviour we want without\n  // worrying about floating-point math edge cases.\n  var numParts = String(number).split('e');\n  var magnitude = parseInt(numParts[1] || 0, 10) + digitCount;\n  return parseFloat(numParts[0] + 'e' + magnitude);\n};\n\n/**\n * Rounds `number` to `decimalCount` decimal places.\n *\n * Negative values of `decimalCount` will eliminate integeral digits.\n *\n * This function corrects for rounding error that may occur when naively\n * multiplying by a power of 10.\n *\n * This function does not correct for inherent limitations in the precision of\n * JavaScript numbers.\n *\n * @param {number} number The number to round.\n * @param {number} decimalCount The number of decimal places to retain.\n *     Must be an integer. May be positive or negative.\n * @return {number}\n * @private\n */\ngoog.i18n.NumberFormat.decimalRound_ = function(number, decimalCount) {\n  goog.asserts.assert(\n      decimalCount % 1 == 0, 'Cannot round to fractional digits \"%s\".',\n      decimalCount);\n\n  if (!number || !isFinite(number)) {\n    return number;\n  }\n\n  var shift = goog.i18n.NumberFormat.decimalShift_;\n  return shift(Math.round(shift(number, decimalCount)), -decimalCount);\n};\n\n\n/**\n * Round to a certain number of significant digits.\n *\n * @param {number} number The number to round.\n * @param {number} significantDigits The number of significant digits\n *     to round to.\n * @param {number} scale Treat number as fixed point times 10^scale.\n * @return {number} The rounded number.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.roundToSignificantDigits_ = function(\n    number, significantDigits, scale) {\n  if (!number) return number;\n\n  var digits = this.intLog10_(number);\n  var magnitude = significantDigits - digits - 1;\n\n  // Only round fraction, not (potentially shifted) integers.\n  if (magnitude < -scale) {\n    return goog.i18n.NumberFormat.decimalRound_(number, -scale);\n  } else {\n    return goog.i18n.NumberFormat.decimalRound_(number, magnitude);\n  }\n};\n\n\n/**\n * Get the plural form of a number.\n * @param {number} quantity The quantity to find plurality of.\n * @return {string} One of 'zero', 'one', 'two', 'few', 'many', 'other'.\n * @private\n */\ngoog.i18n.NumberFormat.prototype.pluralForm_ = function(quantity) {\n  /* TODO: Implement */\n  return 'other';\n};\n\n\n/**\n * Checks if the currency symbol comes before the value ($12) or after (12$)\n * Handy for applications that need to have separate UI fields for the currency\n * value and symbol, especially for input: Price: [USD] [123.45]\n * The currency symbol might be a combo box, or a label.\n *\n * @return {boolean} true if currency is before value.\n */\ngoog.i18n.NumberFormat.prototype.isCurrencyCodeBeforeValue = function() {\n  var posCurrSymbol = this.pattern_.indexOf('\\u00A4');  // '\u00a4' Currency sign\n  var posPound = this.pattern_.indexOf('#');\n  var posZero = this.pattern_.indexOf('0');\n\n  // posCurrValue is the first '#' or '0' found.\n  // If none of them is found (not possible, but still),\n  // the result is true (postCurrSymbol < MAX_VALUE)\n  // That is OK, matches the en_US and ROOT locales.\n  var posCurrValue = Number.MAX_VALUE;\n  if (posPound >= 0 && posPound < posCurrValue) {\n    posCurrValue = posPound;\n  }\n  if (posZero >= 0 && posZero < posCurrValue) {\n    posCurrValue = posZero;\n  }\n\n  // No need to test, it is guaranteed that both these symbols exist.\n  // If not, we have bigger problems than this.\n  return posCurrSymbol < posCurrValue;\n};\n"],
"names":["goog","provide","require","i18n","NumberFormat","goog.i18n.NumberFormat","pattern","opt_currency","opt_currencyStyle","opt_symbols","currency","isValid","TypeError","intlCurrencyCode_","toUpperCase","currencyStyle_","CurrencyStyle","LOCAL","overrideNumberFormatSymbols_","maximumIntegerDigits_","minimumIntegerDigits_","significantDigits_","maximumFractionDigits_","minimumFractionDigits_","minExponentDigits_","useSignForPositiveExponent_","showTrailingZeros_","positivePrefix_","positiveSuffix_","negativePrefix_","getNumberFormatSymbols_","MINUS_SIGN","negativeSuffix_","multiplier_","negativePercentSignExpected_","groupingArray_","decimalSeparatorAlwaysShown_","useExponentialNotation_","compactStyle_","CompactStyle","NONE","baseFormattingNumber_","pattern_","applyStandardPattern_","applyPattern_","Format","DECIMAL","SCIENTIFIC","PERCENT","CURRENCY","COMPACT_SHORT","COMPACT_LONG","PORTABLE","GLOBAL","SHORT","LONG","enforceAsciiDigits_","setEnforceAsciiDigits","goog.i18n.NumberFormat.setEnforceAsciiDigits","doEnforce","isEnforceAsciiDigits","goog.i18n.NumberFormat.isEnforceAsciiDigits","prototype","goog.i18n.NumberFormat.prototype.getNumberFormatSymbols_","NumberFormatSymbols_u_nu_latn","NumberFormatSymbols","getCurrencyCode_","goog.i18n.NumberFormat.prototype.getCurrencyCode_","DEF_CURRENCY_CODE","setMinimumFractionDigits","goog.i18n.NumberFormat.prototype.setMinimumFractionDigits","min","Error","getMinimumFractionDigits","goog.i18n.NumberFormat.prototype.getMinimumFractionDigits","setMaximumFractionDigits","goog.i18n.NumberFormat.prototype.setMaximumFractionDigits","max","getMaximumFractionDigits","goog.i18n.NumberFormat.prototype.getMaximumFractionDigits","setSignificantDigits","goog.i18n.NumberFormat.prototype.setSignificantDigits","number","getSignificantDigits","goog.i18n.NumberFormat.prototype.getSignificantDigits","setShowTrailingZeros","goog.i18n.NumberFormat.prototype.setShowTrailingZeros","showTrailingZeros","setBaseFormatting","goog.i18n.NumberFormat.prototype.setBaseFormatting","baseFormattingNumber","asserts","assert","isFinite","getBaseFormatting","goog.i18n.NumberFormat.prototype.getBaseFormatting","goog.i18n.NumberFormat.prototype.applyPattern_","replace","pos","parseAffix_","trunkStart","parseTrunk_","trunkLen","length","charAt","PATTERN_SEPARATOR_","goog.i18n.NumberFormat.prototype.applyStandardPattern_","patternType","DECIMAL_PATTERN","SCIENTIFIC_PATTERN","PERCENT_PATTERN","adjustPrecision","CURRENCY_PATTERN","applyCompactStyle_","goog.i18n.NumberFormat.prototype.applyCompactStyle_","style","parse","goog.i18n.NumberFormat.prototype.parse","text","opt_pos","ret","NaN","gotPositive","indexOf","gotNegative","INFINITY","Infinity","parseNumber_","goog.i18n.NumberFormat.prototype.parseNumber_","sawDecimal","sawExponent","sawDigit","exponentPos","scale","decimal","DECIMAL_SEP","grouping","GROUP_SEP","exponentChar","EXP_SYMBOL","normalizedText","ch","digit","getDigit_","PERMILL","parseFloat","format","goog.i18n.NumberFormat.prototype.format","isNaN","NAN","parts","unit","getUnitAfterRounding_","decimalShift_","divisorBase","push","prefix","isNegative","subformatExponential_","subformatFixed_","suffix","join","roundNumber_","goog.i18n.NumberFormat.prototype.roundNumber_","shift","shiftedNumber","roundToSignificantDigits_","Math","round","intValue","fracValue","floor","formatNumberGroupingRepeatingDigitsParts_","goog.i18n.NumberFormat.prototype.formatNumberGroupingRepeatingDigitsParts_","zeroCode","intPart","groupingArray","repeatedDigitLen","nonRepeatedGroupCompleteCount","currentGroupSizeIndex","currentGroupSize","digitLen","i","String","fromCharCode","Number","repeatedDigitIndex","formatNumberGroupingNonRepeatingDigitsParts_","goog.i18n.NumberFormat.prototype.formatNumberGroupingNonRepeatingDigitsParts_","digitLenLeft","rightToLeftParts","rightDigitIndex","apply","reverse","goog.i18n.NumberFormat.prototype.subformatFixed_","minIntDigits","rounded","numIntDigits","intLog10_","fractionPresent","minimumFractionDigits","translatableInt","ZERO_DIGIT","charCodeAt","nonRepeatedGroupCount","j","fracPart","fracPartSplit","split","floatFrac","exp","parseInt","string","repeat","zeroesToAdd","fracLen","addExponentPart_","goog.i18n.NumberFormat.prototype.addExponentPart_","exponent","PLUS_SIGN","exponentDigits","zeroChar","getMantissa_","goog.i18n.NumberFormat.prototype.getMantissa_","value","goog.i18n.NumberFormat.prototype.subformatExponential_","math","safeFloor","log","remainder","goog.i18n.NumberFormat.prototype.getDigit_","code","PATTERN_ZERO_DIGIT_","PATTERN_GROUPING_SEPARATOR_","PATTERN_DECIMAL_SEPARATOR_","PATTERN_PER_MILLE_","PATTERN_PERCENT_","PATTERN_DIGIT_","PATTERN_EXPONENT_","PATTERN_PLUS_","PATTERN_CURRENCY_SIGN_","QUOTE_","goog.i18n.NumberFormat.prototype.parseAffix_","affix","inQuote","len","getLocalCurrencySignWithFallback","getGlobalCurrencySignWithFallback","getPortableCurrencySignWithFallback","goog.i18n.NumberFormat.prototype.parseTrunk_","decimalPos","digitLeftCount","zeroDigitCount","digitRightCount","groupingCount","loop","n","totalDigits","effectiveDecimalPos","CompactNumberUnit","NULL_UNIT_","getUnitFor_","goog.i18n.NumberFormat.prototype.getUnitFor_","base","plurality","table","CompactNumberFormatSymbols","COMPACT_DECIMAL_SHORT_PATTERN","COMPACT_DECIMAL_LONG_PATTERN","patterns","previousNonNullBase","exec","goog.i18n.NumberFormat.prototype.getUnitAfterRounding_","formattingNumber","pluralityNumber","abs","initialPlurality","pluralForm_","initialDivisor","pluralityAttempt","pluralityRounded","formattingAttempt","formattingRounded","finalPlurality","goog.i18n.NumberFormat.prototype.intLog10_","goog.i18n.NumberFormat.decimalShift_","digitCount","numParts","magnitude","decimalRound_","goog.i18n.NumberFormat.decimalRound_","decimalCount","goog.i18n.NumberFormat.prototype.roundToSignificantDigits_","significantDigits","digits","goog.i18n.NumberFormat.prototype.pluralForm_","quantity","isCurrencyCodeBeforeValue","goog.i18n.NumberFormat.prototype.isCurrencyCodeBeforeValue","posCurrSymbol","posPound","posZero","posCurrValue","MAX_VALUE"]
}
